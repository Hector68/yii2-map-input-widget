function MapInputWidgetManager(){const t=".hector68-map-input-widget";var e=Array(),n=function(t){if(!$(t).data("initialized")){var e=new MapInputWidget(t);return e.initialize(),e}return null},i=function(t){var n=t.getId();e[n]=t};this.initializeWidgets=function(){$(t).each(function(t,e){var a=n(e);a&&i(a)})},this.getWidget=function(t){var n=e[t];return n}}function MapInputWidget(t){const e="input.hector68-map-input-widget-input",n="input.hector68-map-input-widget-search-bar",i="div.hector68-map-input-widget-canvas";var a,o,r,u,p=this,g=function(){a=$(t).find(e).get(0),o=$(t).find(n).get(0),r=$(t).find(i).get(0)},d=function(){u=new google.maps.Map(r,{mapTypeId:$(t).data("map-type"),center:h(),zoom:$(t).data("zoom"),styles:[{featureType:"poi",stylers:[{visibility:"off"}]}],mapTypeControlOptions:{mapTypeIds:[]}}),google.maps.event.addListener(u,"click",function(t){p.setPosition({latitude:t.latLng.lat(),longitude:t.latLng.lng()})})},l=function(){var e=v();p.setPosition(e),$(t).data("initialized",!0)},s=function(){var e=$(t).data("enable-search-bar"),n=!e;$(o).prop("hidden",n),searchBarAutocomplete=new google.maps.places.Autocomplete(o),u.controls[google.maps.ControlPosition.TOP_LEFT].push(o),google.maps.event.addListener(searchBarAutocomplete,"place_changed",function(){var t=this.getPlace(),e=t.geometry;if(e){var n=e.location;p.setPosition(n)}}),google.maps.event.addDomListener(o,"keydown",function(t){13==t.keyCode&&t.preventDefault()})},c=function(t){var e=y(),n=L(t);return e=e.replace(/%latitude%/g,n.lat()),e=e.replace(/%longitude%/g,n.lng())},f=function(){var t=""!=$(a).prop("value");return t},v=function(){var t,e=y(),n=$(a).prop("value");if(""!==n){var i=e.indexOf("%latitude%"),o=e.indexOf("%longitude%"),r=o>i,u=r?0:1,p=r?1:0,g=n.match(/-?\d+(\.\d+)?/g)[u],d=n.match(/-?\d+(\.\d+)?/g)[p];t=new google.maps.LatLng(g,d)}else t=null;return t},m=function(){var e=$(t).data("latitude"),n=$(t).data("longitude"),i=new google.maps.LatLng(e,n);return i},h=function(){var t;return t=f()?v():m()},y=function(){var e=$(t).attr("data-pattern").toString();return e},L=function(t){var e;if(void 0!==t.latitude&&void 0!==t.longitude){var n=t.latitude,i=t.longitude;e=new google.maps.LatLng(n,i)}else e=t;return e};this.initialize=function(){var e=jQuery.Event("initializeBefore");e.MapInputWidget=this,$(t).trigger(e),g(),d(),l(),s();var n=jQuery.Event("initializeAfter");n.MapInputWidget=this,$(t).trigger(n)},this.getId=function(){var e=$(t).prop("id");return e},this.setPosition=function(e){if(u.marker&&u.marker.setMap(null),null===e)return void $(a).prop("disabled",!0);$(a).prop("disabled",!1);var n=L(e);1===$(t).data("align-map-center")&&u.panTo(n);var i=null;1===$(t).data("animate-marker")&&(i=google.maps.Animation.DROP),u.marker=new google.maps.Marker({map:u,position:n,draggable:!0,animation:i}),google.maps.event.addListener(u.marker,"dragend",function(){p.setPosition(this.getPosition())});var o=($(t).data("pattern"),jQuery.Event("makePoint"));o.pointString=c(n),o.MapInputWidget=this,$(t).trigger(o),$(a).prop("value",o.pointString)},this.panTo=function(t){var e=L(t);u.panTo(e)},this.setZoom=function(t){u.setZoom(t)},this.getMap=function(){return u},this.getSearchBar=function(){return o},this.getInput=function(){return a}}
